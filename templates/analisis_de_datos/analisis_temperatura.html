<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Análisis de Temperaturas - Wialon</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://hst-api.wialon.com/wsdk/script/wialon.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='navbar.css') }}"> <!-- CSS del Navbar -->
    <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/es.js"></script>
    <script src="{{ url_for('static', filename='js/loginWialon.js') }}"></script>


</head>
<body>
    {% include 'navbar.html' %}

    <div class="container">
        <h1>Análisis de desempeño de sensores</h1>
    
        <p>Este informe se conforma de una tabla:</p>
        <p>Muestra los diferentes valores que fueron reportados por los sensores dentro del rango de tiempo seleccionado.</p>
    
        <form id="reportForm">
            <div class="form-group">
                <label for="unitGroupSelect">Seleccione un grupo de unidades:</label>
                <select id="unitGroupSelect" class="form-control" required>
                    <!-- Options will be populated dynamically -->
                </select>
            </div>
    
            <div class="form-group">
                <label for="sensorSelect">Seleccione el sensor:</label>
                <select id="sensorSelect" class="form-control" required>
                    <option value="Sensor de luz">Sensor de luz</option>
                    <option value="Bateria">Batería</option>
                    <option value="Sensor de humedad">Sensor de humedad</option>
                    <option value="Temperatura">Sensor de temperatura</option>
                </select>
            </div>
    
            <div class="form-group">
                <label for="startDateTime">Fecha y hora de inicio:</label>
                <input type="text" id="startDateTime" class="form-control" required>
            </div>
    
            <div class="form-group">
                <label for="endDateTime">Fecha y hora de fin:</label>
                <input type="text" id="endDateTime" class="form-control" required>
            </div>
    
            <input type="hidden" id="action" name="action" value="tablas">
    
            <div class="button-container">
                <button type="button" class="btn btn-primary" onclick="window.executeReport('tablas')">Ejecutar Informe</button>
                <button type="button" class="btn btn-secondary" onclick="window.executeReport('graficas')">Gráficas</button>
            </div>
        </form>
    
        <div id="resultContainer"></div>
    
        <button id="downloadBtn" style="display:none;">Descargar Imagen</button>
    
        <div id="log" class="response-container"></div>
    </div>
    
    <div id="modalDatosGenerales" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Datos Generales de Cada Sensor</h2>
            <div id="modalDatosGeneralesContent"></div>
            <div class="modal-navigation">
                <button id="prevSensor">&larr; Anterior</button>
                <span id="sensorCounter"></span>
                <button id="nextSensor">Siguiente &rarr;</button>
            </div>
        </div>
    </div>

<script type="module" src="{{ url_for('static', filename='js/analisis_tempHumLuzBat.js') }}"></script>


<div id="modalDatosGenerales" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <h2>Datos Generales de Cada Sensor</h2>
        <div id="modalDatosGeneralesContent"></div>
        <div class="modal-navigation">
            <button id="prevSensor">&larr; Anterior</button>
            <span id="sensorCounter"></span>
            <button id="nextSensor">Siguiente &rarr;</button>
        </div>
    </div>
</div>
</body>
</html>